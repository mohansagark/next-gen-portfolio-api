# üöÇ Railway Deployment Guide

## Prerequisites

1. ‚úÖ GitHub repository created and pushed
2. ‚úÖ Railway account created at [railway.app](https://railway.app)

## Step 1: Create Railway Project

1. **Login to Railway** at [railway.app](https://railway.app)
2. **Create New Project**
3. **Deploy from GitHub repo**
   - Select your `next-gen-portfolio-api` repository
   - Railway will automatically detect it's a Node.js project

## Step 2: Configure Environment Variables

In Railway dashboard, go to **Variables** tab and add these **REQUIRED** environment variables:

### üî¥ Critical Production Variables

```bash
# Database (Railway will provide PostgreSQL)
DATABASE_URL=postgresql://username:password@host:port/database
# ‚Üë This will be auto-generated when you add PostgreSQL service

# JWT Secrets (CHANGE THESE FOR SECURITY!)
JWT_SECRET=your-super-secure-production-jwt-secret-min-32-chars
JWT_REFRESH_SECRET=your-super-secure-production-refresh-secret-min-32-chars
JWT_EXPIRES_IN=1h
JWT_REFRESH_EXPIRES_IN=7d

# Server Configuration
NODE_ENV=production
PORT=3000

# CORS (replace with your frontend domain)
ALLOWED_ORIGIN=https://yourportfolio.com

# API Version
API_VERSION=v1

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
```

## Step 3: Add PostgreSQL Database

1. In Railway dashboard, click **"+ New"**
2. Select **"Database"**
3. Choose **"PostgreSQL"**
4. Railway will automatically:
   - Create the database
   - Generate `DATABASE_URL` environment variable
   - Connect it to your API service

## Step 4: Deploy

1. **Trigger Deployment**:
   - Push any change to your GitHub repo
   - Or click "Deploy" in Railway dashboard

2. **Monitor Deployment**:
   - Check build logs in Railway dashboard
   - Wait for deployment to complete
   - Check health endpoint: `https://your-app.railway.app/health`

## Step 5: Post-Deployment Setup

### Verify API is Working

```bash
# Test health endpoint
curl https://your-app.railway.app/health

# Test API root
curl https://your-app.railway.app/api/v1

# Test registration
curl -X POST https://your-app.railway.app/api/v1/auth/register \
  -H "Content-Type: application/json" \
  -d '{"email":"admin@yourportfolio.com","username":"admin","password":"securepassword123"}'
```

### Access Documentation

- **API Docs**: `https://your-app.railway.app/api-docs`
- **Health Check**: `https://your-app.railway.app/health`

## üîë Security Checklist for Production

### Critical Actions Required:

1. **üî¥ CHANGE JWT SECRETS**:
   ```bash
   # Generate secure secrets (32+ characters)
   JWT_SECRET=your-unique-production-secret-never-share-this-minimum-32-chars
   JWT_REFRESH_SECRET=your-unique-refresh-secret-never-share-this-minimum-32-chars
   ```

2. **üî¥ UPDATE CORS ORIGIN**:
   ```bash
   # Replace with your actual frontend domain
   ALLOWED_ORIGIN=https://yourportfolio.com
   ```

3. **üî¥ SECURE ADMIN CREDENTIALS**:
   - Use strong passwords (12+ characters)
   - Use secure email addresses
   - Don't use default credentials

### Optional Security Enhancements:

4. **Environment-specific Rate Limits**:
   ```bash
   RATE_LIMIT_MAX_REQUESTS=50  # Lower for production
   ```

5. **Enable HTTPS** (Railway handles this automatically)

6. **Database Security** (Railway handles this automatically)

## üîß Production Configuration Keys Summary

| Variable | Required | Purpose | Example |
|----------|----------|---------|---------|
| `DATABASE_URL` | ‚úÖ Yes | PostgreSQL connection | Auto-generated by Railway |
| `JWT_SECRET` | ‚úÖ Yes | Access token signing | 32+ character secret |
| `JWT_REFRESH_SECRET` | ‚úÖ Yes | Refresh token signing | 32+ character secret |
| `NODE_ENV` | ‚úÖ Yes | Environment mode | `production` |
| `ALLOWED_ORIGIN` | ‚úÖ Yes | CORS policy | `https://yourportfolio.com` |
| `JWT_EXPIRES_IN` | ‚ö†Ô∏è Recommended | Token expiry | `1h` |
| `JWT_REFRESH_EXPIRES_IN` | ‚ö†Ô∏è Recommended | Refresh token expiry | `7d` |
| `PORT` | ‚ö†Ô∏è Recommended | Server port | `3000` |
| `API_VERSION` | ‚ö†Ô∏è Recommended | API version | `v1` |
| `RATE_LIMIT_WINDOW_MS` | Optional | Rate limit window | `900000` |
| `RATE_LIMIT_MAX_REQUESTS` | Optional | Max requests per window | `100` |

## üö® Important Notes

1. **Never commit .env to GitHub** (it's in .gitignore)
2. **Use Railway's environment variables** for all secrets
3. **Test all endpoints** after deployment
4. **Monitor Railway logs** for any issues
5. **Update CORS origin** to match your frontend domain

## üéØ Success Indicators

Your deployment is successful when:

- ‚úÖ Health check returns 200: `https://your-app.railway.app/health`
- ‚úÖ API docs accessible: `https://your-app.railway.app/api-docs` 
- ‚úÖ Registration works without errors
- ‚úÖ Protected endpoints require authentication
- ‚úÖ Public endpoints work without authentication

---

**Ready to deploy! üöÄ**
